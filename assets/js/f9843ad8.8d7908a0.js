"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4352],{1184:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>d});var n=i(4041);const s={},l=n.createContext(s);function a(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(l.Provider,{value:t},e.children)}},1817:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/fill-f171bf1f95388655be7dd89930ba35ac.png"},4541:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"image","title":"Images","description":"Loading Images","source":"@site/docs/image.md","sourceDirName":".","slug":"/images","permalink":"/react-native-skia/docs/images","draft":false,"unlisted":false,"editUrl":"https://github.com/shopify/react-native-skia/edit/main/docs/docs/image.md","tags":[],"version":"current","frontMatter":{"id":"image","title":"Images","sidebar_label":"Image","slug":"/images"},"sidebar":"tutorialSidebar","previous":{"title":"Pictures","permalink":"/react-native-skia/docs/shapes/pictures"},"next":{"title":"Animated Images","permalink":"/react-native-skia/docs/animated-images"}}');var s=i(1085),l=i(1184);const a={id:"image",title:"Images",sidebar_label:"Image",slug:"/images"},d=void 0,o={},c=[{value:"Loading Images",id:"loading-images",level:2},{value:"useImage",id:"useimage",level:3},{value:"MakeImageFromEncoded",id:"makeimagefromencoded",level:3},{value:"MakeImage",id:"makeimage",level:3},{value:"useImage",id:"useimage-1",level:3},{value:"Image Component",id:"image-component",level:2},{value:"Example",id:"example",level:3},{value:"Sampling Options",id:"sampling-options",level:3},{value:"fit=&quot;contain&quot;",id:"fitcontain",level:3},{value:"fit=&quot;cover&quot;",id:"fitcover",level:3},{value:"fit=&quot;fill&quot;",id:"fitfill",level:3},{value:"fit=&quot;fitHeight&quot;",id:"fitfitheight",level:3},{value:"fit=&quot;fitWidth&quot;",id:"fitfitwidth",level:3},{value:"fit=&quot;scaleDown&quot;",id:"fitscaledown",level:3},{value:"fit=&quot;none&quot;",id:"fitnone",level:3},{value:"Instance Methods",id:"instance-methods",level:2}];function r(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"loading-images",children:"Loading Images"}),"\n",(0,s.jsx)(t.h3,{id:"useimage",children:"useImage"}),"\n",(0,s.jsxs)(t.p,{children:["Images are loaded using the ",(0,s.jsx)(t.code,{children:"useImage"})," hook. This hook returns an ",(0,s.jsx)(t.code,{children:"SkImage"})," instance, which can be passed to the ",(0,s.jsx)(t.code,{children:"Image"})," component."]}),"\n",(0,s.jsx)(t.p,{children:"Images can be loaded using require statements or by passing a network URL directly. It is also possible to load images from the app bundle using named images."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { useImage } from "@shopify/react-native-skia";\n// Loads an image from the JavaScript bundle\nconst image1 = useImage(require("./assets/oslo"));\n// Loads an image from the network\nconst image2 = useImage("https://picsum.photos/200/300");\n// Loads an image that was added to the Android/iOS bundle\nconst image3 = useImage("Logo");\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Loading an image is an asynchronous operation, so the ",(0,s.jsx)(t.code,{children:"useImage"})," hook will return null until the image is fully loaded. You can use this behavior to conditionally render the ",(0,s.jsx)(t.code,{children:"Image"})," component, as shown in the ",(0,s.jsx)(t.a,{href:"#example",children:"example below"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The hook also provides an optional error handler as a second parameter."}),"\n",(0,s.jsx)(t.h3,{id:"makeimagefromencoded",children:"MakeImageFromEncoded"}),"\n",(0,s.jsxs)(t.p,{children:["You can also create image instances manually using ",(0,s.jsx)(t.code,{children:"MakeImageFromEncoded"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { Skia } from "@shopify/react-native-skia";\n\n// A sample base64-encoded pixel\nconst data = Skia.Data.fromBase64("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==");\nconst image = Skia.Image.MakeImageFromEncoded(data);\n'})}),"\n",(0,s.jsx)(t.h3,{id:"makeimage",children:"MakeImage"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"MakeImage"})," allows you to create an image by providing pixel data and specifying the format."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { Skia, AlphaType, ColorType } from "@shopify/react-native-skia";\n\nconst pixels = new Uint8Array(256 * 256 * 4);\npixels.fill(255);\nlet i = 0;\nfor (let x = 0; x < 256; x++) {\n  for (let y = 0; y < 256; y++) {\n    pixels[i++] = (x * y) % 255;\n  }\n}\nconst data = Skia.Data.fromBytes(pixels);\nconst img = Skia.Image.MakeImage(\n  {\n    width: 256,\n    height: 256,\n    alphaType: AlphaType.Opaque,\n    colorType: ColorType.RGBA_8888,\n  },\n  data,\n  256 * 4\n);\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),": The nested for-loops in the code sample above seem to have a mistake in the loop conditions. They should loop up to ",(0,s.jsx)(t.code,{children:"256"}),", not ",(0,s.jsx)(t.code,{children:"256 * 4"}),", as the pixel data array has been initialized with ",(0,s.jsx)(t.code,{children:"256 * 256 * 4"})," elements representing a 256 by 256 image where each pixel is represented by 4 bytes (RGBA)."]}),"\n",(0,s.jsx)(t.h3,{id:"useimage-1",children:"useImage"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"useImage"})," is simply a helper function to load image data."]}),"\n",(0,s.jsx)(t.h2,{id:"image-component",children:"Image Component"}),"\n",(0,s.jsx)(t.p,{children:"Images can be drawn by specifying the output rectangle and how the image should fit into that rectangle."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"image"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"SkImage"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"An instance of the image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"x"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"number"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The left position of the destination image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"y"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"number"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The top position of the destination image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"width"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"number"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The width of the destination image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"height"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"number"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The height of the destination image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"fit?"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"Fit"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["The method used to fit the image into the rectangle. Values can be ",(0,s.jsx)(t.code,{children:"contain"}),", ",(0,s.jsx)(t.code,{children:"fill"}),", ",(0,s.jsx)(t.code,{children:"cover"}),", ",(0,s.jsx)(t.code,{children:"fitHeight"}),", ",(0,s.jsx)(t.code,{children:"fitWidth"}),", ",(0,s.jsx)(t.code,{children:"scaleDown"}),", or ",(0,s.jsx)(t.code,{children:"none"})," (the default is ",(0,s.jsx)(t.code,{children:"contain"}),")."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"sampling?"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"Sampling"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["The method used to sample the image. see (",(0,s.jsx)(t.a,{href:"/docs/images#sampling-options",children:"sampling options"}),")."]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { Canvas, Image, useImage } from "@shopify/react-native-skia";\n\nconst ImageDemo = () => {\n  const image = useImage(require("./assets/oslo.jpg"));\n  return (\n    <Canvas style={{ flex: 1 }}>\n      <Image image={image} fit="contain" x={0} y={0} width={256} height={256} />\n    </Canvas>\n  );\n};\n'})}),"\n",(0,s.jsx)(t.h3,{id:"sampling-options",children:"Sampling Options"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"sampling"})," prop allows you to control how the image is sampled when it is drawn.\nUse cubic sampling for best quality: you can use the default ",(0,s.jsx)(t.code,{children:"sampling={CubicSampling}"})," (defaults to ",(0,s.jsx)(t.code,{children:"{ B: 0, C: 0 }"}),") or any value you would like: ",(0,s.jsx)(t.code,{children:"sampling={{ B: 0, C: 0.5 }}"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["You can also use filter modes (",(0,s.jsx)(t.code,{children:"nearest"})," or ",(0,s.jsx)(t.code,{children:"linear"}),") and mimap modes (",(0,s.jsx)(t.code,{children:"none"}),", ",(0,s.jsx)(t.code,{children:"nearest"}),", or ",(0,s.jsx)(t.code,{children:"linear"}),"). Default is ",(0,s.jsx)(t.code,{children:"nearest"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { Canvas, Image, useImage, CubicSampling, FilterMode, MipmapMode } from "@shopify/react-native-skia";\n\nconst ImageDemo = () => {\n  const image = useImage(require("./assets/oslo.jpg"));\n  return (\n    <Canvas style={{ flex: 1 }}>\n      <Image\n        image={image}\n        fit="contain"\n        x={0}\n        y={0}\n        width={256}\n        height={256}\n        sampling={CubicSampling}\n      />\n      <Image\n        image={image}\n        fit="contain"\n        x={0}\n        y={0}\n        width={256}\n        height={256}\n        sampling={{ filter: FilterMode.Nearest, mipmap: MipmapMode.Nearest }}\n      />\n    </Canvas>\n  );\n};\n'})}),"\n",(0,s.jsx)(t.h3,{id:"fitcontain",children:'fit="contain"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;contain&quot;",src:i(9592).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h3,{id:"fitcover",children:'fit="cover"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;cover&quot;",src:i(9185).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h3,{id:"fitfill",children:'fit="fill"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;fill&quot;",src:i(1817).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h3,{id:"fitfitheight",children:'fit="fitHeight"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;fitHeight&quot;",src:i(4908).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h3,{id:"fitfitwidth",children:'fit="fitWidth"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;fitWidth&quot;",src:i(6133).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h3,{id:"fitscaledown",children:'fit="scaleDown"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;scaleDown&quot;",src:i(6170).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h3,{id:"fitnone",children:'fit="none"'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"fit=&quot;none&quot;",src:i(6832).A+"",width:"768",height:"256"})}),"\n",(0,s.jsx)(t.h2,{id:"instance-methods",children:"Instance Methods"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"height"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Returns the possibly scaled height of the image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"width"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Returns the possibly scaled width of the image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"getImageInfo"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Returns the image info for the image."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"encodeToBytes"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Encodes the image pixels, returning the result as a ",(0,s.jsx)(t.code,{children:"UInt8Array"}),"."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"encodeToBase64"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Encodes the image pixels, returning the result as a base64-encoded string."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"readPixels"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Reads the image pixels, returning result as UInt8Array or Float32Array"})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},4908:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/fitHeight-1c9334534883f9df13fe0362cb0e9180.png"},6133:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/fitWidth-0ce6d3402dc86f3796438d76c6c230f9.png"},6170:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/scaleDown-feb18e23f3d0efa665f2cf1005d1f578.png"},6832:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/none-5afc0e6ba4602acd65d5704fb5dee8da.png"},9185:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/cover-d876e99ed6b72cd68d4cf2de2da0368b.png"},9592:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/contain-feb18e23f3d0efa665f2cf1005d1f578.png"}}]);