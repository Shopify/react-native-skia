"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7924],{1184(e,n,i){i.d(n,{R:()=>r,x:()=>o});var s=i(4041);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},8856(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"getting-started/installation","title":"Installation","description":"React Native Skia brings the Skia Graphics Library to React Native.","source":"@site/docs/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/react-native-skia/docs/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/shopify/react-native-skia/edit/main/apps/docs/docs/getting-started/installation.md","tags":[],"version":"current","frontMatter":{"id":"installation","title":"Installation","sidebar_label":"Installation","slug":"/getting-started/installation"},"sidebar":"tutorialSidebar","next":{"title":"Hello World","permalink":"/react-native-skia/docs/getting-started/hello-world"}}');var t=i(1085),a=i(1184);const r={id:"installation",title:"Installation",sidebar_label:"Installation",slug:"/getting-started/installation"},o=void 0,l={},d=[{value:"Postinstall Script",id:"postinstall-script",level:2},{value:"Using Expo",id:"using-expo",level:2},{value:"Bundle Size",id:"bundle-size",level:3},{value:"iOS",id:"ios",level:2},{value:"Android",id:"android",level:2},{value:"Proguard",id:"proguard",level:3},{value:"TroubleShooting",id:"troubleshooting",level:3},{value:"Web",id:"web",level:2},{value:"TV",id:"tv",level:2},{value:"Debugging",id:"debugging",level:2},{value:"Testing with Jest",id:"testing-with-jest",level:2},{value:"Playground",id:"playground",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["React Native Skia brings the ",(0,t.jsx)(n.a,{href:"https://skia.org/",children:"Skia Graphics Library"})," to React Native.\nSkia serves as the graphics engine for Google Chrome and Chrome OS, Android, Flutter, Mozilla Firefox, Firefox OS, and many other products."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Version compatibility:"}),"\n",(0,t.jsx)(n.code,{children:"react-native@>=0.79"})," and ",(0,t.jsx)(n.code,{children:"react@>=19"})," are required. ",(0,t.jsx)("br",{}),"\nIn addition you should make sure you're on at least ",(0,t.jsx)(n.code,{children:"iOS 14"})," and ",(0,t.jsx)(n.code,{children:"Android API level 21"})," or above. ",(0,t.jsx)("br",{}),"\nTo use React Native Skia with video support, ",(0,t.jsx)(n.code,{children:"Android API level 26"})," or above is required."]}),"\n",(0,t.jsxs)(n.p,{children:["For ",(0,t.jsx)(n.code,{children:"react-native@<=0.78"})," and ",(0,t.jsx)(n.code,{children:"react@<=18"}),", you need to use ",(0,t.jsx)(n.code,{children:"@shopify/react-native-skia"})," version ",(0,t.jsx)(n.code,{children:"1.12.4"})," or below."]}),"\n",(0,t.jsx)(n.p,{children:"tvOS, macOS, and macOS Catalyst are also supported platforms."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"yarn add @shopify/react-native-skia\n# or\nnpm install @shopify/react-native-skia\n"})}),"\n",(0,t.jsx)(n.h2,{id:"postinstall-script",children:"Postinstall Script"}),"\n",(0,t.jsxs)(n.p,{children:["React Native Skia uses a ",(0,t.jsx)(n.code,{children:"postinstall"})," script to download prebuilt Skia binaries. This script ",(0,t.jsx)(n.strong,{children:"must run"})," for the library to work. If you see build errors about missing Skia libraries, the postinstall script likely didn't run."]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)("strong",{children:"npm / yarn classic"})}),(0,t.jsx)(n.p,{children:"Postinstall scripts run automatically. If you encounter issues, you can manually trigger it:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npm rebuild @shopify/react-native-skia\n# or\nyarn rebuild @shopify/react-native-skia\n"})})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)("strong",{children:"bun"})}),(0,t.jsx)(n.p,{children:"Bun requires explicit trust for packages with lifecycle scripts:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"bun add --trust @shopify/react-native-skia\n"})}),(0,t.jsxs)(n.p,{children:["Or add to your ",(0,t.jsx)(n.code,{children:"package.json"}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "trustedDependencies": ["@shopify/react-native-skia"]\n}\n'})})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)("strong",{children:"pnpm"})}),(0,t.jsxs)(n.p,{children:["pnpm v10+ requires explicit permission for lifecycle scripts. Add to your ",(0,t.jsx)(n.code,{children:"package.json"}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "pnpm": {\n    "onlyBuiltDependencies": ["@shopify/react-native-skia"]\n  }\n}\n'})}),(0,t.jsx)(n.p,{children:"Then reinstall:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"pnpm install\n"})}),(0,t.jsx)(n.p,{children:"For older pnpm versions, you may need:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"pnpm add --allow-build=@shopify/react-native-skia @shopify/react-native-skia\n"})})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)("strong",{children:"Yarn Berry (v2+)"})}),(0,t.jsx)(n.p,{children:"Yarn Berry doesn't run postinstall scripts by default. You need to enable them:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"yarn config set enableScripts true\n"})}),(0,t.jsxs)(n.p,{children:["Or add to ",(0,t.jsx)(n.code,{children:".yarnrc.yml"}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"enableScripts: true\n"})}),(0,t.jsx)(n.p,{children:"Then reinstall:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"yarn install\n"})})]}),"\n",(0,t.jsx)(n.h2,{id:"using-expo",children:"Using Expo"}),"\n",(0,t.jsxs)(n.p,{children:["Expo provides a ",(0,t.jsx)(n.code,{children:"with-skia"})," template, which you can use to create a new project."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn create expo-app my-app -e with-skia\n# or\nnpx create-expo-app my-app -e with-skia\n"})}),"\n",(0,t.jsx)("video",{width:"61%",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:(0,t.jsx)("source",{src:"https://firebasestorage.googleapis.com/v0/b/start-react-native.appspot.com/o/expo-template2.mp4?alt=media&token=cdc13f16-9c5a-488a-b5d6-19d11f3e1842",type:"video/mp4"})}),"\n",(0,t.jsx)(n.h3,{id:"bundle-size",children:"Bundle Size"}),"\n",(0,t.jsxs)(n.p,{children:["Below is the app size increase to be expected when adding React Native Skia to your project (",(0,t.jsx)(n.a,{href:"bundle-size",children:"learn more"}),")."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"iOS"}),(0,t.jsx)(n.th,{children:"Android"}),(0,t.jsx)(n.th,{children:"Web"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"6 MB"}),(0,t.jsx)(n.td,{children:"4 MB"}),(0,t.jsx)(n.td,{children:"2.9 MB"})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"ios",children:"iOS"}),"\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"pod install"})," on the ",(0,t.jsx)(n.code,{children:"ios/"})," directory."]}),"\n",(0,t.jsx)(n.h2,{id:"android",children:"Android"}),"\n",(0,t.jsxs)(n.p,{children:["Currently, you will need Android NDK to be installed.\nIf you have Android Studio installed, make sure ",(0,t.jsx)(n.code,{children:"$ANDROID_NDK"})," is available.\n",(0,t.jsx)(n.code,{children:"ANDROID_NDK=/Users/username/Library/Android/sdk/ndk/<version>"})," for instance."]}),"\n",(0,t.jsxs)(n.p,{children:["If the NDK is not installed, you can install it via Android Studio by going to the menu ",(0,t.jsx)(n.em,{children:"File > Project Structure"})]}),"\n",(0,t.jsxs)(n.p,{children:["And then the ",(0,t.jsx)(n.em,{children:"SDK Location"})," section. It will show you the NDK path, or the option to download it if you don't have it installed."]}),"\n",(0,t.jsx)(n.h3,{id:"proguard",children:"Proguard"}),"\n",(0,t.jsxs)(n.p,{children:["If you're using Proguard, make sure to add the following rule at ",(0,t.jsx)(n.code,{children:"proguard-rules.pro"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"-keep class com.shopify.reactnative.skia.** { *; }\n"})}),"\n",(0,t.jsx)(n.h3,{id:"troubleshooting",children:"TroubleShooting"}),"\n",(0,t.jsxs)(n.p,{children:["For error ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"CMake 'X.X.X' was not found in SDK, PATH, or by cmake.dir property."})})]}),"\n",(0,t.jsxs)(n.p,{children:["open ",(0,t.jsx)(n.em,{children:"Tools > SDK Manager"}),", switch to the ",(0,t.jsx)(n.em,{children:"SDK Tools"})," tab.\nFind ",(0,t.jsx)(n.code,{children:"CMake"})," and click ",(0,t.jsx)(n.em,{children:"Show Package Details"})," and download compatiable version ",(0,t.jsx)(n.strong,{children:"'X.X.X'"}),", and apply to install."]}),"\n",(0,t.jsx)(n.h2,{id:"web",children:"Web"}),"\n",(0,t.jsxs)(n.p,{children:["To use this library in the browser, see ",(0,t.jsx)(n.a,{href:"/docs/getting-started/web",children:"these instructions"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"tv",children:"TV"}),"\n",(0,t.jsxs)(n.p,{children:["Starting from version ",(0,t.jsx)(n.a,{href:"https://github.com/Shopify/react-native-skia/releases/tag/v1.9.0",children:"1.9.0"})," React Native Skia supports running on TV devices using ",(0,t.jsx)(n.a,{href:"https://github.com/react-native-tvos/react-native-tvos",children:"React Native TVOS"}),".\nCurrently both Android TV and Apple TV are supported."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["Not all features have been tested yet, so please ",(0,t.jsx)(n.a,{href:"https://github.com/Shopify/react-native-skia/issues",children:"report"})," any issues you encounter when using React Native Skia on TV devices."]})}),"\n",(0,t.jsx)(n.h2,{id:"debugging",children:"Debugging"}),"\n",(0,t.jsxs)(n.p,{children:["We recommend using React Native DevTools to debug your JS code \u2014 see the ",(0,t.jsx)(n.a,{href:"https://reactnative.dev/docs/debugging",children:"React Native docs"}),". Alternatively, you can debug both JS and platform code in VS Code and via native IDEs. If using VS Code, we recommend ",(0,t.jsx)(n.a,{href:"https://github.com/expo/vscode-expo",children:"Expo Tools"}),", ",(0,t.jsx)(n.a,{href:"https://ide.swmansion.com/",children:"Radon IDE"}),", or Microsoft's ",(0,t.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=msjsdiag.vscode-react-native#debugging-react-native-applications",children:"React Native Tools"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"testing-with-jest",children:"Testing with Jest"}),"\n",(0,t.jsx)(n.p,{children:"React Native Skia test mocks use a web implementation that depends on loading CanvasKit."}),"\n",(0,t.jsxs)(n.p,{children:["The very first step is to make sure that your Skia files are not being transformed by jest, for instance, we can add it the ",(0,t.jsx)(n.code,{children:"transformIgnorePatterns"})," directive:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'"transformIgnorePatterns": [\n  "node_modules/(?!(react-native|react-native.*|@react-native.*|@?react-navigation.*|@shopify/react-native-skia)/)"\n]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You also need to add the following to your ",(0,t.jsx)(n.code,{children:"jest.config.js"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'// jest.config.js\nmodule.exports = {\n  // Other values\n  testEnvironment: "@shopify/react-native-skia/jestEnv.js",\n  setupFilesAfterEnv: [\n    "@shopify/react-native-skia/jestSetup.js",\n  ],\n};\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"jestEnv.js"})," will load CanvasKit for you and ",(0,t.jsx)(n.code,{children:"jestEnv.js"})," mocks React Native Skia.\nYou can also have a look at the ",(0,t.jsx)(n.a,{href:"https://github.com/Shopify/react-native-skia/tree/main/apps/example",children:"example app"})," to see how Jest tests are enabled there."]}),"\n",(0,t.jsx)(n.h2,{id:"playground",children:"Playground"}),"\n",(0,t.jsxs)(n.p,{children:["We have example projects you can play with ",(0,t.jsx)(n.a,{href:"https://github.com/Shopify/react-native-skia/tree/main/apps",children:"here"}),".\nIt would require you first to ",(0,t.jsx)(n.a,{href:"https://github.com/shopify/react-native-skia?tab=readme-ov-file#library-development",children:"build Skia locally"})," first."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);