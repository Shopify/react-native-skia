{"version":3,"names":["BaseHostObject","JsiSkRect","JsiSkRRect","fromValue","CanvasKit","rect","ref","Float32Array","of","x","y","width","height","topLeft","topRight","bottomRight","bottomLeft","RRectXY","rx","ry","constructor","Infinity","scale","Math","min","_defineProperty"],"sources":["JsiSkRRect.ts"],"sourcesContent":["import type { CanvasKit, RRect } from \"canvaskit-wasm\";\n\nimport type { InputRRect, SkRect, SkRRect } from \"../types\";\n\nimport { BaseHostObject } from \"./Host\";\nimport { JsiSkRect } from \"./JsiSkRect\";\n\nexport class JsiSkRRect\n  extends BaseHostObject<RRect, \"RRect\">\n  implements SkRRect\n{\n  dispose = () => {\n    // Float32Array\n  };\n\n  static fromValue(CanvasKit: CanvasKit, rect: InputRRect) {\n    if (rect instanceof JsiSkRect) {\n      return rect.ref;\n    }\n    if (\n      \"topLeft\" in rect &&\n      \"topRight\" in rect &&\n      \"bottomRight\" in rect &&\n      \"bottomLeft\" in rect\n    ) {\n      return Float32Array.of(\n        rect.rect.x,\n        rect.rect.y,\n        rect.rect.x + rect.rect.width,\n        rect.rect.y + rect.rect.height,\n        rect.topLeft.x,\n        rect.topLeft.y,\n        rect.topRight.x,\n        rect.topRight.y,\n        rect.bottomRight.x,\n        rect.bottomRight.y,\n        rect.bottomLeft.x,\n        rect.bottomLeft.y\n      );\n    }\n    return CanvasKit.RRectXY(\n      JsiSkRect.fromValue(CanvasKit, rect.rect),\n      rect.rx,\n      rect.ry\n    );\n  }\n\n  constructor(CanvasKit: CanvasKit, rect: SkRect, rx: number, ry: number) {\n    // based on https://github.com/google/skia/blob/main/src/core/SkRRect.cpp#L51\n    if (rx === Infinity || ry === Infinity) {\n      rx = ry = 0;\n    }\n    if (rect.width < rx + rx || rect.height < ry + ry) {\n      // At most one of these two divides will be by zero, and neither numerator is zero.\n      const scale = Math.min(rect.width / (rx + rx), rect.height / (ry + ry));\n      rx *= scale;\n      ry *= scale;\n    }\n    const ref = CanvasKit.RRectXY(JsiSkRect.fromValue(CanvasKit, rect), rx, ry);\n    super(CanvasKit, ref, \"RRect\");\n  }\n\n  get rx() {\n    return this.ref[4];\n  }\n\n  get ry() {\n    return this.ref[5];\n  }\n\n  get rect() {\n    return new JsiSkRect(\n      this.CanvasKit,\n      Float32Array.of(this.ref[0], this.ref[1], this.ref[2], this.ref[3])\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}