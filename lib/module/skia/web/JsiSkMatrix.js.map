{"version":3,"names":["toMatrix3","HostObject","isMatrixHostObject","obj","Array","isArray","JsiSkMatrix","constructor","CanvasKit","ref","_defineProperty","preMultiply","matrix","set","Matrix","multiply","postMultiply","concat","fromValue","length","translate","x","y","translated","postTranslate","scale","scaled","postScale","skew","skewed","postSkew","rotate","value","rotated","postRotate","identity","get","from"],"sources":["JsiSkMatrix.ts"],"sourcesContent":["import type { CanvasKit, Matrix3x3 } from \"canvaskit-wasm\";\n\nimport { toMatrix3 } from \"../types\";\nimport type { SkMatrix, InputMatrix, Matrix4 } from \"../types\";\n\nimport { HostObject } from \"./Host\";\n\nconst isMatrixHostObject = (obj: InputMatrix): obj is SkMatrix =>\n  !Array.isArray(obj);\n\nexport class JsiSkMatrix\n  extends HostObject<Matrix3x3, \"Matrix\">\n  implements SkMatrix\n{\n  constructor(CanvasKit: CanvasKit, ref: Matrix3x3) {\n    super(CanvasKit, ref, \"Matrix\");\n  }\n\n  private preMultiply(matrix: number[]) {\n    this.ref.set(this.CanvasKit.Matrix.multiply(this.ref, matrix));\n  }\n\n  private postMultiply(matrix: number[]) {\n    this.ref.set(this.CanvasKit.Matrix.multiply(matrix, this.ref));\n  }\n\n  dispose = () => {\n    // Do nothing - the matrix is represenetd by a Float32Array\n  };\n\n  concat(matrix: InputMatrix) {\n    this.preMultiply(\n      // eslint-disable-next-line no-nested-ternary\n      isMatrixHostObject(matrix)\n        ? JsiSkMatrix.fromValue(matrix)\n        : matrix.length === 16\n        ? toMatrix3(matrix as Matrix4)\n        : [...matrix]\n    );\n    return this;\n  }\n\n  translate(x: number, y: number) {\n    this.preMultiply(this.CanvasKit.Matrix.translated(x, y));\n    return this;\n  }\n\n  postTranslate(x: number, y: number) {\n    this.postMultiply(this.CanvasKit.Matrix.translated(x, y));\n    return this;\n  }\n\n  scale(x: number, y?: number) {\n    this.preMultiply(this.CanvasKit.Matrix.scaled(x, y ?? x));\n    return this;\n  }\n\n  postScale(x: number, y?: number) {\n    this.postMultiply(this.CanvasKit.Matrix.scaled(x, y ?? x));\n    return this;\n  }\n\n  skew(x: number, y: number) {\n    this.preMultiply(this.CanvasKit.Matrix.skewed(x, y));\n    return this;\n  }\n\n  postSkew(x: number, y: number) {\n    this.postMultiply(this.CanvasKit.Matrix.skewed(x, y));\n    return this;\n  }\n\n  rotate(value: number) {\n    this.preMultiply(this.CanvasKit.Matrix.rotated(value));\n    return this;\n  }\n\n  postRotate(value: number) {\n    this.postMultiply(this.CanvasKit.Matrix.rotated(value));\n    return this;\n  }\n\n  identity() {\n    this.ref.set(this.CanvasKit.Matrix.identity());\n    return this;\n  }\n\n  get() {\n    return Array.from(this.ref);\n  }\n}\n"],"mappings":"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","ignoreList":[]}