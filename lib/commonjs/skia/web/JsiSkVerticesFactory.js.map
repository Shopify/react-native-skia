{"version":3,"names":["_JsiSkVertices","require","_Host","concat","arrays","totalLength","arr","length","result","Float32Array","offset","set","MakeVertices","CanvasKit","mode","positions","textureCoordinates","colors","indices","isVolatile","JsiSkVertices","getEnum","map","x","y","flat","reduce","a","c","exports"],"sources":["JsiSkVerticesFactory.ts"],"sourcesContent":["import type { CanvasKit } from \"canvaskit-wasm\";\n\nimport type { SkColor, SkPoint, VertexMode } from \"../types\";\n\nimport { JsiSkVertices } from \"./JsiSkVertices\";\nimport { getEnum } from \"./Host\";\n\nconst concat = (...arrays: Float32Array[]) => {\n  let totalLength = 0;\n  for (const arr of arrays) {\n    totalLength += arr.length;\n  }\n  const result = new Float32Array(totalLength);\n  let offset = 0;\n  for (const arr of arrays) {\n    result.set(arr, offset);\n    offset += arr.length;\n  }\n  return result;\n};\n\nexport const MakeVertices = (\n  CanvasKit: CanvasKit,\n  mode: VertexMode,\n  positions: SkPoint[],\n  textureCoordinates?: SkPoint[] | null,\n  colors?: SkColor[],\n  indices?: number[] | null,\n  isVolatile?: boolean\n) =>\n  new JsiSkVertices(\n    CanvasKit,\n    CanvasKit.MakeVertices(\n      getEnum(CanvasKit, \"VertexMode\", mode),\n      positions.map(({ x, y }) => [x, y]).flat(),\n      (textureCoordinates || []).map(({ x, y }) => [x, y]).flat(),\n      !colors ? null : colors.reduce((a, c) => concat(a, c)),\n      indices,\n      isVolatile\n    )\n  );\n"],"mappings":";;;;;;AAIA,IAAAA,cAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAEA,MAAME,MAAM,GAAGA,CAAC,GAAGC,MAAsB,KAAK;EAC5C,IAAIC,WAAW,GAAG,CAAC;EACnB,KAAK,MAAMC,GAAG,IAAIF,MAAM,EAAE;IACxBC,WAAW,IAAIC,GAAG,CAACC,MAAM;EAC3B;EACA,MAAMC,MAAM,GAAG,IAAIC,YAAY,CAACJ,WAAW,CAAC;EAC5C,IAAIK,MAAM,GAAG,CAAC;EACd,KAAK,MAAMJ,GAAG,IAAIF,MAAM,EAAE;IACxBI,MAAM,CAACG,GAAG,CAACL,GAAG,EAAEI,MAAM,CAAC;IACvBA,MAAM,IAAIJ,GAAG,CAACC,MAAM;EACtB;EACA,OAAOC,MAAM;AACf,CAAC;AAEM,MAAMI,YAAY,GAAGA,CAC1BC,SAAoB,EACpBC,IAAgB,EAChBC,SAAoB,EACpBC,kBAAqC,EACrCC,MAAkB,EAClBC,OAAyB,EACzBC,UAAoB,KAEpB,IAAIC,4BAAa,CACfP,SAAS,EACTA,SAAS,CAACD,YAAY,CACpB,IAAAS,aAAO,EAACR,SAAS,EAAE,YAAY,EAAEC,IAAI,CAAC,EACtCC,SAAS,CAACO,GAAG,CAAC,CAAC;EAAEC,CAAC;EAAEC;AAAE,CAAC,KAAK,CAACD,CAAC,EAAEC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,EAC1C,CAACT,kBAAkB,IAAI,EAAE,EAAEM,GAAG,CAAC,CAAC;EAAEC,CAAC;EAAEC;AAAE,CAAC,KAAK,CAACD,CAAC,EAAEC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,EAC3D,CAACR,MAAM,GAAG,IAAI,GAAGA,MAAM,CAACS,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKzB,MAAM,CAACwB,CAAC,EAAEC,CAAC,CAAC,CAAC,EACtDV,OAAO,EACPC,UACF,CACF,CAAC;AAACU,OAAA,CAAAjB,YAAA,GAAAA,YAAA","ignoreList":[]}