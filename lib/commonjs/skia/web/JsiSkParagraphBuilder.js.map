{"version":3,"names":["_types","require","_Host","_JsiSkParagraph","_JsiSkTextStyle","_JsiSkPaint","JsiSkParagraphBuilder","HostObject","constructor","CanvasKit","ref","addPlaceholder","width","height","alignment","PlaceholderAlignment","Baseline","baseline","TextBaseline","Alphabetic","offset","value","addText","text","build","JsiSkParagraph","reset","pushStyle","style","foregroundPaint","backgroundPaint","textStyle","JsiSkTextStyle","toTextStyle","_textStyle$color","_textStyle$background","fg","JsiSkPaint","fromValue","makePaint","color","Float32Array","of","bg","backgroundColor","pushPaintStyle","TextStyle","pop","dispose","delete","paint","Paint","setColor","exports"],"sources":["JsiSkParagraphBuilder.ts"],"sourcesContent":["import type {\n  CanvasKit,\n  InputColor,\n  Paint,\n  ParagraphBuilder,\n  TextStyle,\n} from \"canvaskit-wasm\";\n\nimport type {\n  SkParagraphBuilder,\n  SkParagraph,\n  SkTextStyle,\n  SkPaint,\n} from \"../types\";\nimport { PlaceholderAlignment, TextBaseline } from \"../types\";\n\nimport { HostObject } from \"./Host\";\nimport { JsiSkParagraph } from \"./JsiSkParagraph\";\nimport { JsiSkTextStyle } from \"./JsiSkTextStyle\";\nimport { JsiSkPaint } from \"./JsiSkPaint\";\n\nexport class JsiSkParagraphBuilder\n  extends HostObject<ParagraphBuilder, \"ParagraphBuilder\">\n  implements SkParagraphBuilder\n{\n  constructor(CanvasKit: CanvasKit, ref: ParagraphBuilder) {\n    super(CanvasKit, ref, \"ParagraphBuilder\");\n  }\n\n  addPlaceholder(\n    width: number | undefined = 0,\n    height: number | undefined = 0,\n    alignment: PlaceholderAlignment | undefined = PlaceholderAlignment.Baseline,\n    baseline: TextBaseline | undefined = TextBaseline.Alphabetic,\n    offset: number | undefined = 0\n  ): SkParagraphBuilder {\n    this.ref.addPlaceholder(\n      width,\n      height,\n      { value: alignment },\n      { value: baseline },\n      offset\n    );\n    return this;\n  }\n  addText(text: string): SkParagraphBuilder {\n    this.ref.addText(text);\n    return this;\n  }\n\n  build(): SkParagraph {\n    return new JsiSkParagraph(this.CanvasKit, this.ref.build());\n  }\n\n  reset(): void {\n    this.ref.reset();\n  }\n\n  pushStyle(\n    style: SkTextStyle,\n    foregroundPaint?: SkPaint | undefined,\n    backgroundPaint?: SkPaint | undefined\n  ): SkParagraphBuilder {\n    const textStyle: TextStyle = JsiSkTextStyle.toTextStyle(style);\n    if (foregroundPaint || backgroundPaint) {\n      // Due the canvaskit API not exposing textStyle methods,\n      // we set the default paint color to black for the foreground\n      // and transparent for the background\n      const fg: Paint = foregroundPaint\n        ? JsiSkPaint.fromValue(foregroundPaint)\n        : this.makePaint(textStyle.color ?? Float32Array.of(0, 0, 0, 1));\n      const bg: Paint = backgroundPaint\n        ? JsiSkPaint.fromValue(backgroundPaint)\n        : this.makePaint(\n            textStyle.backgroundColor ?? Float32Array.of(0, 0, 0, 0)\n          );\n      this.ref.pushPaintStyle(new this.CanvasKit.TextStyle(textStyle), fg, bg);\n    } else {\n      this.ref.pushStyle(new this.CanvasKit.TextStyle(textStyle));\n    }\n\n    return this;\n  }\n\n  pop(): SkParagraphBuilder {\n    this.ref.pop();\n    return this;\n  }\n\n  dispose() {\n    this.ref.delete();\n  }\n\n  private makePaint(color: InputColor) {\n    const paint = new this.CanvasKit.Paint();\n    paint.setColor(color);\n    return paint;\n  }\n}\n"],"mappings":"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","ignoreList":[]}