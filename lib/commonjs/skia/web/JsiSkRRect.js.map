{"version":3,"names":["_Host","require","_JsiSkRect","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","JsiSkRRect","BaseHostObject","fromValue","CanvasKit","rect","JsiSkRect","ref","Float32Array","of","x","y","width","height","topLeft","topRight","bottomRight","bottomLeft","RRectXY","rx","ry","constructor","Infinity","scale","Math","min","exports"],"sources":["JsiSkRRect.ts"],"sourcesContent":["import type { CanvasKit, RRect } from \"canvaskit-wasm\";\n\nimport type { InputRRect, SkRect, SkRRect } from \"../types\";\n\nimport { BaseHostObject } from \"./Host\";\nimport { JsiSkRect } from \"./JsiSkRect\";\n\nexport class JsiSkRRect\n  extends BaseHostObject<RRect, \"RRect\">\n  implements SkRRect\n{\n  dispose = () => {\n    // Float32Array\n  };\n\n  static fromValue(CanvasKit: CanvasKit, rect: InputRRect) {\n    if (rect instanceof JsiSkRect) {\n      return rect.ref;\n    }\n    if (\n      \"topLeft\" in rect &&\n      \"topRight\" in rect &&\n      \"bottomRight\" in rect &&\n      \"bottomLeft\" in rect\n    ) {\n      return Float32Array.of(\n        rect.rect.x,\n        rect.rect.y,\n        rect.rect.x + rect.rect.width,\n        rect.rect.y + rect.rect.height,\n        rect.topLeft.x,\n        rect.topLeft.y,\n        rect.topRight.x,\n        rect.topRight.y,\n        rect.bottomRight.x,\n        rect.bottomRight.y,\n        rect.bottomLeft.x,\n        rect.bottomLeft.y\n      );\n    }\n    return CanvasKit.RRectXY(\n      JsiSkRect.fromValue(CanvasKit, rect.rect),\n      rect.rx,\n      rect.ry\n    );\n  }\n\n  constructor(CanvasKit: CanvasKit, rect: SkRect, rx: number, ry: number) {\n    // based on https://github.com/google/skia/blob/main/src/core/SkRRect.cpp#L51\n    if (rx === Infinity || ry === Infinity) {\n      rx = ry = 0;\n    }\n    if (rect.width < rx + rx || rect.height < ry + ry) {\n      // At most one of these two divides will be by zero, and neither numerator is zero.\n      const scale = Math.min(rect.width / (rx + rx), rect.height / (ry + ry));\n      rx *= scale;\n      ry *= scale;\n    }\n    const ref = CanvasKit.RRectXY(JsiSkRect.fromValue(CanvasKit, rect), rx, ry);\n    super(CanvasKit, ref, \"RRect\");\n  }\n\n  get rx() {\n    return this.ref[4];\n  }\n\n  get ry() {\n    return this.ref[5];\n  }\n\n  get rect() {\n    return new JsiSkRect(\n      this.CanvasKit,\n      Float32Array.of(this.ref[0], this.ref[1], this.ref[2], this.ref[3])\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}