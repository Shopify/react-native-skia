{"version":3,"names":["_types","require","_Host","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","isMatrixHostObject","obj","Array","isArray","JsiSkMatrix","HostObject","constructor","CanvasKit","ref","preMultiply","matrix","set","Matrix","multiply","postMultiply","concat","fromValue","length","toMatrix3","translate","x","y","translated","postTranslate","scale","scaled","postScale","skew","skewed","postSkew","rotate","rotated","postRotate","identity","get","from","exports"],"sources":["JsiSkMatrix.ts"],"sourcesContent":["import type { CanvasKit, Matrix3x3 } from \"canvaskit-wasm\";\n\nimport { toMatrix3 } from \"../types\";\nimport type { SkMatrix, InputMatrix, Matrix4 } from \"../types\";\n\nimport { HostObject } from \"./Host\";\n\nconst isMatrixHostObject = (obj: InputMatrix): obj is SkMatrix =>\n  !Array.isArray(obj);\n\nexport class JsiSkMatrix\n  extends HostObject<Matrix3x3, \"Matrix\">\n  implements SkMatrix\n{\n  constructor(CanvasKit: CanvasKit, ref: Matrix3x3) {\n    super(CanvasKit, ref, \"Matrix\");\n  }\n\n  private preMultiply(matrix: number[]) {\n    this.ref.set(this.CanvasKit.Matrix.multiply(this.ref, matrix));\n  }\n\n  private postMultiply(matrix: number[]) {\n    this.ref.set(this.CanvasKit.Matrix.multiply(matrix, this.ref));\n  }\n\n  dispose = () => {\n    // Do nothing - the matrix is represenetd by a Float32Array\n  };\n\n  concat(matrix: InputMatrix) {\n    this.preMultiply(\n      // eslint-disable-next-line no-nested-ternary\n      isMatrixHostObject(matrix)\n        ? JsiSkMatrix.fromValue(matrix)\n        : matrix.length === 16\n        ? toMatrix3(matrix as Matrix4)\n        : [...matrix]\n    );\n    return this;\n  }\n\n  translate(x: number, y: number) {\n    this.preMultiply(this.CanvasKit.Matrix.translated(x, y));\n    return this;\n  }\n\n  postTranslate(x: number, y: number) {\n    this.postMultiply(this.CanvasKit.Matrix.translated(x, y));\n    return this;\n  }\n\n  scale(x: number, y?: number) {\n    this.preMultiply(this.CanvasKit.Matrix.scaled(x, y ?? x));\n    return this;\n  }\n\n  postScale(x: number, y?: number) {\n    this.postMultiply(this.CanvasKit.Matrix.scaled(x, y ?? x));\n    return this;\n  }\n\n  skew(x: number, y: number) {\n    this.preMultiply(this.CanvasKit.Matrix.skewed(x, y));\n    return this;\n  }\n\n  postSkew(x: number, y: number) {\n    this.postMultiply(this.CanvasKit.Matrix.skewed(x, y));\n    return this;\n  }\n\n  rotate(value: number) {\n    this.preMultiply(this.CanvasKit.Matrix.rotated(value));\n    return this;\n  }\n\n  postRotate(value: number) {\n    this.postMultiply(this.CanvasKit.Matrix.rotated(value));\n    return this;\n  }\n\n  identity() {\n    this.ref.set(this.CanvasKit.Matrix.identity());\n    return this;\n  }\n\n  get() {\n    return Array.from(this.ref);\n  }\n}\n"],"mappings":"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","ignoreList":[]}