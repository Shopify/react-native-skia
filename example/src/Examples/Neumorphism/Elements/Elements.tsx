import React from "react";
import { Dimensions } from "react-native";
import {
  Canvas,
  Fill,
  useValue,
  useTouchHandler,
  runTiming,
  Group,
  Path,
  vec,
  mix,
  useDerivedValue,
} from "@shopify/react-native-skia";

import { Button } from "./components/Button";

const { width, height } = Dimensions.get("window");
const PADDING = 32;
const size = width - PADDING * 2;
const x = PADDING;
const y = (height - size) / 2;

export const Neumorphism = () => {
  const pressed = useValue(0);
  const onTouch = useTouchHandler({
    onStart: () => {
      runTiming(pressed, 1, { duration: 150 });
    },
    onEnd: () => {
      pressed.current = 0;
    },
  });
  const transform = useDerivedValue(
    () => [
      { translateX: 7.5 },
      { translateY: 6 },
      { scale: mix(pressed.current, 1, 0.975) },
    ],
    [pressed]
  );
  return (
    <Canvas style={{ flex: 1 }} onTouch={onTouch}>
      <Fill color="#F0F0F3" />
      <Button x={x} y={y} width={size} height={size} pressed={pressed}>
        <Group transform={transform} origin={vec(12, 12)}>
          <Path
            // eslint-disable-next-line max-len
            path="M4.875 0.875031H3.125C2.66087 0.875031 2.21575 1.0594 1.88756 1.38759C1.55937 1.71578 1.375 2.1609 1.375 2.62503C1.375 3.08916 1.55937 3.53428 1.88756 3.86247C2.21575 4.19066 2.66087 4.37503 3.125 4.37503M4.875 0.875031V4.37503M4.875 0.875031H6.625C6.85482 0.875031 7.08238 0.920296 7.2947 1.00824C7.50702 1.09619 7.69994 1.22509 7.86244 1.38759C8.02494 1.5501 8.15385 1.74301 8.24179 1.95533C8.32974 2.16765 8.375 2.39522 8.375 2.62503C8.375 2.85484 8.32974 3.08241 8.24179 3.29473C8.15385 3.50705 8.02494 3.69996 7.86244 3.86247C7.69994 4.02497 7.50702 4.15387 7.2947 4.24182C7.08238 4.32977 6.85482 4.37503 6.625 4.37503M4.875 4.37503H3.125M4.875 4.37503H6.625M4.875 4.37503V7.87503M3.125 4.37503C2.66087 4.37503 2.21575 4.55941 1.88756 4.88759C1.55937 5.21578 1.375 5.6609 1.375 6.12503C1.375 6.58916 1.55937 7.03428 1.88756 7.36247C2.21575 7.69066 2.66087 7.87503 3.125 7.87503M6.625 4.37503C6.39519 4.37503 6.16763 4.4203 5.95531 4.50824C5.74299 4.59619 5.55007 4.72509 5.38757 4.88759C5.22506 5.0501 5.09616 5.24302 5.00821 5.45534C4.92027 5.66766 4.875 5.89522 4.875 6.12503C4.875 6.35484 4.92027 6.58241 5.00821 6.79473C5.09616 7.00705 5.22506 7.19997 5.38757 7.36247C5.55007 7.52497 5.74299 7.65388 5.95531 7.74182C6.16763 7.82977 6.39519 7.87503 6.625 7.87503C6.85482 7.87503 7.08238 7.82977 7.2947 7.74182C7.50702 7.65388 7.69994 7.52497 7.86244 7.36247C8.02494 7.19997 8.15385 7.00705 8.24179 6.79473C8.32974 6.58241 8.375 6.35484 8.375 6.12503C8.375 5.89522 8.32974 5.66766 8.24179 5.45534C8.15385 5.24302 8.02494 5.0501 7.86244 4.88759C7.69994 4.72509 7.50702 4.59619 7.2947 4.50824C7.08238 4.4203 6.85482 4.37503 6.625 4.37503ZM3.125 7.87503C2.66087 7.87503 2.21575 8.05941 1.88756 8.3876C1.55937 8.71578 1.375 9.1609 1.375 9.62503C1.375 10.0892 1.55937 10.5343 1.88756 10.8625C2.21575 11.1907 2.66087 11.375 3.125 11.375C3.58913 11.375 4.03425 11.1907 4.36244 10.8625C4.69063 10.5343 4.875 10.0892 4.875 9.62503V7.87503M3.125 7.87503H4.875"
            color="#FB7575"
            style="stroke"
            strokeCap="round"
            strokeJoin="round"
            strokeWidth={1}
          />
        </Group>
      </Button>
    </Canvas>
  );
};
